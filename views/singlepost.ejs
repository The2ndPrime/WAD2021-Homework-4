<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/style.css"> 
    <title>Single post</title>
</head>

<body>
    <%- include('./partials/header.ejs') %> 

    <div class="singlepost">
        <div class="post-header">
            <img class="avatar" src="<%= posts.avatar_url %>" />
            <h5 class="name"><%= posts.avatar_name %> </h5>
        </div>
        <h5 class="create-time"> <%= posts.create_time %></h5>
        <h4 class="title"> <%= posts.title %></h4>
        <img class="media" src=" <%= posts.media_url %>" />
        <p class="post-text"> <%= posts.body %></p>
        <button class="like-icon" >
            <img class="icon_url" src="/res/images/thumbs_up.png" />
            <div class="likes"> <%= posts.likes %></div>
        </button>
    </div>
    <a class="delete" data-del="<%= posts.id %>">Delete</a> 
</div> 
<script> 
    const delreq = document.querySelector('a.delete'); 
    delreq.addEventListener('click', (e) => { 
        const endpoint = `/posts/${delreq.dataset.del}`; 
        fetch(endpoint, { 
                method: 'DELETE', 
            }).then(window.location.href = '/posts') 
    }); 
</script> 
    
</body>
</html>